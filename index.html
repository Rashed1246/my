<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>موقعي الشخصي — لوحة تحكم</title>
  <style>
    :root {
      --bg: #0f1724;
      --card: #0b1220;
      --accent: #06b6d4;
      --muted: #9aa4b2;
      --glass: rgba(255, 255, 255, 0.03);
      --radius: 12px;
      --transition: 180ms;
      --font: 'Segoe UI', Tahoma, system-ui, "Noto Naskh Arabic", sans-serif;
    }

    body.light {
      --bg: #f5f7fa;
      --card: #fff;
      --accent: #ef4444;
      --muted: #444;
      --glass: rgba(0, 0, 0, 0.06);
      background: linear-gradient(180deg, #fdfdfd, #f0f0f0);
      color: #111;
    }

    * {
      box-sizing: border-box;
    }

    html,
    body {
      height: 100%;
      margin: 0;
      background: var(--bg);
      color: #e6eef6;
      font-family: var(--font);
    }

    .app {
      display: grid;
      grid-template-columns: 1fr 360px;
      gap: 14px;
      min-height: 100vh;
      padding: 14px;
    }

    header {
      grid-column: 1/-1;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px;
      background: var(--glass);
      border-radius: 12px;
      flex-wrap: wrap;
      gap: 8px;
    }

    .brand {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .logo {
      width: 44px;
      height: 44px;
      background: linear-gradient(90deg, var(--accent), #7c3aed);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      color: #fff;
    }

    .brand h1 {
      font-size: 16px;
      margin: 0;
    }

    .brand p {
      margin: 0;
      font-size: 12px;
      color: var(--muted);
    }

    main {
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.02), rgba(255, 255, 255, 0.01));
      padding: 12px;
      border-radius: 12px;
      overflow: auto;
    }

    .controls {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-bottom: 10px;
    }

    button {
      background: var(--card);
      border: 1px solid rgba(255, 255, 255, 0.03);
      color: var(--muted);
      padding: 8px 10px;
      border-radius: 10px;
      cursor: pointer;
      transition: transform var(--transition), box-shadow var(--transition);
      min-width: 110px;
      text-align: center;
    }

    button.primary {
      background: linear-gradient(90deg, var(--accent), #7c3aed);
      color: #021022;
      font-weight: 700;
    }

    .editor {
      min-height: 50vh;
      padding: 12px;
      background: #071526;
      border-radius: 10px;
      outline: none;
      border: 1px solid rgba(255, 255, 255, 0.02);
      font-size: 16px;
      line-height: 1.6;
      overflow: auto;
    }

    aside {
      background: linear-gradient(180deg, #071226, #071320);
      padding: 12px;
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.03);
      display: flex;
      flex-direction: column;
      gap: 12px;
      align-items: stretch;
      overflow: auto;
    }

    .card {
      background: rgba(255, 255, 255, 0.02);
      padding: 10px;
      border-radius: 8px;
    }

    .row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
    }

    label {
      font-size: 13px;
      color: var(--muted);
    }

    input[type="text"],
    textarea,
    select {
      width: 100%;
      padding: 8px;
      border-radius: 8px;
      border: 1px solid rgba(255, 255, 255, 0.03);
      background: transparent;
      color: inherit;
    }

    textarea {
      min-height: 60px;
      resize: vertical;
    }

    .switch {
      width: 46px;
      height: 26px;
      background: #0b1220;
      border-radius: 999px;
      position: relative;
      padding: 3px;
      cursor: pointer;
      border: 1px solid rgba(255, 255, 255, 0.02);
    }

    .knob {
      width: 18px;
      height: 18px;
      background: white;
      border-radius: 50%;
      position: absolute;
      top: 3px;
      left: 3px;
      transition: left var(--transition);
    }

    .switch.on {
      background: linear-gradient(90deg, #06b6d4, #7c3aed);
    }

    .switch.on .knob {
      left: 25px;
    }

    .meta {
      font-size: 13px;
      color: var(--muted);
    }

    .stat {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .stat .value {
      font-size: 18px;
      color: #e6f8fb;
      font-weight: 700;
    }

    footer {
      grid-column: 1/-1;
      text-align: center;
      color: var(--muted);
      font-size: 12px;
      padding-top: 6px;
    }

    .toast {
      position: fixed;
      left: 50%;
      transform: translateX(-50%);
      bottom: 20px;
      background: #021526;
      color: #dff7fb;
      padding: 10px 14px;
      border-radius: 10px;
      box-shadow: 0 8px 20px rgba(2, 6, 23, 0.6);
      display: none;
      z-index: 9999;
    }

    .header-meta {
      display: flex;
      gap: 12px;
      align-items: center;
      font-size: 13px;
      color: var(--muted);
    }

    #historyModal {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 18px;
      z-index: 9999;
    }

    #historyModal .panel {
      width: min(920px, 100%);
      max-height: 80vh;
      background: var(--card);
      border-radius: 10px;
      padding: 12px;
      overflow: auto;
    }

    #historyModal h3 {
      margin: 0 0 10px 0;
      color: #fff;
    }

    .history-item {
      padding: 8px;
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.02);
      margin-bottom: 8px;
      display: flex;
      justify-content: space-between;
      gap: 8px;
      align-items: center;
    }

    .history-item .meta {
      font-size: 12px;
      color: var(--muted);
      max-width: 70%;
    }

    .history-actions {
      display: flex;
      gap: 8px;
    }

    @media(max-width:880px) {
      .app {
        grid-template-columns: 1fr;
        padding: 10px;
        min-height: 100vh;
      }

      aside {
        order: 2;
        max-height: 300px;
      }

      main {
        order: 1;
      }

      .controls button {
        flex: 1 1 45%;
        min-width: auto;
      }

      .editor {
        min-height: 40vh;
        font-size: 15px;
      }

      header {
        justify-content: center;
      }

      #historyModal .panel {
        padding: 10px;
      }
    }

    /* شاشة الترحيب */
    #welcomeScreen {
      position: fixed;
      inset: 0;
      background: linear-gradient(135deg, #06b6d4, #7c3aed);
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      z-index: 99999;
      opacity: 1;
    }

    #welcomeScreen h1 {
      font-size: 48px;
      margin: 0;
      animation: slideDown 2s ease;
    }

    #welcomeScreen p {
      font-size: 20px;
      margin-top: 12px;
      animation: fadeIn 3s ease;
    }

    @keyframes slideDown {
      0% {
        transform: translateY(-50px);
        opacity: 0;
      }

      100% {
        transform: translateY(0);
        opacity: 1;
      }
    }

    @keyframes fadeIn {
      0% {
        opacity: 0;
      }

      100% {
        opacity: 1;
      }
    }
  </style>
</head>

<body>
  <div id="welcomeScreen">
    <h1 id="welcomeTitle">مرحباً بك في موقعي</h1>
    <p>سيتم فتح الموقع تلقائياً خلال 10 ثواني</p>
  </div>

  <div class="app" role="application" style="display:none;">
    <header>
      <div class="brand">
        <div class="logo" id="logoTxt">م</div>
        <div>
          <h1 contenteditable="true" id="siteName">موقعي الشخصي</h1>
          <p id="siteTag">لوحة تحكم قابلة للتعديل</p>
        </div>
      </div>
      <div class="header-meta">
        <div id="clock">--:--:--</div>
        <div id="date">--/--/----</div>
      </div>
    </header>

    <main>
      <div class="controls" id="topControls">
        <button class="primary" id="saveBtn">حفظ (محلي)</button>
        <button id="downloadBtn">تنزيل HTML</button>
        <button id="clearBtn">مسح المحتوى</button>
        <button id="timeBtn">أظهر التاريخ والوقت</button>
        <button id="locBtn">احصل على الموقع</button>
        <button id="themeBtn">تبديل ليل/نهار</button>
        <button id="newPageBtn">صفحة جديدة</button>
        <button id="historyBtn">المحفوظات</button>
      </div>
      <div class="editor" id="editor" contenteditable="true" aria-label="محرر النص">
        اكتب هنا. هذا محرر نص كامل، يمكنك تغيير النص، الضغط على حفظ ثم إعادة تحميل الصفحة لرؤية البيانات المحفوظة.
      </div>
      <div class="controls" style="margin-top:12px;">
        <label style="min-width:120px">حجم الخط:
          <select id="fontSize" style="margin-left:8px">
            <option value="14px">14px</option>
            <option value="16px" selected>16px</option>
            <option value="18px">18px</option>
            <option value="20px">20px</option>
            <option value="22px">22px</option>
          </select>
        </label>
        <label style="min-width:180px">نوع الخط:
          <select id="fontFamily" style="margin-left:8px">
            <option value="'Segoe UI',Tahoma,system-ui">Segoe UI</option>
            <option value="'Tahoma',sans-serif">Tahoma</option>
            <option value="'Noto Naskh Arabic',serif" selected>Noto Naskh Arabic</option>
            <option value="'Cairo',sans-serif">Cairo</option>
            <option value="'Courier New',monospace">Courier New</option>
          </select>
        </label>
      </div>
    </main>

    <aside>
      <div class="card">
        <label>اسم الموقع (قابل للتعديل)</label>
        <input type="text" id="siteInput" placeholder="اكتب اسم الموقع" />
        <small>اضغط حفظ ليتم تخزينه محلياً</small>
      </div>

      <div class="card">
        <div class="row">
          <label>حالة الموقع</label>
          <div class="toggle">
            <div id="statusText" class="meta">غير معروف</div>
            <div id="switch" class="switch" role="switch" aria-checked="false">
              <div class="knob"></div>
            </div>
          </div>
        </div>
        <small id="statusInfo">لم يتم تحديد الحالة.</small>
      </div>

      <div class="card">
        <div class="row">
          <label>معلومات الموقع</label>
          <div>
            <div class="meta" id="coords">خط العرض: - , خط الطول: -</div>
            <div class="meta" id="accuracy"></div>
          </div>
        </div>
        <small id="locNote">اضغط "احصل على الموقع" لاختبار واجهة الموقع الجغرافي.</small>
      </div>

      <div class="card">
        <button id="voiceBtn" class="primary">الإملاء الصوتي</button>
        <small id="voiceStatus">اضغط لتفعيل الكتابة بالصوت</small>
      </div>

      <div class="card">
        <label>وصف الموقع:</label>
        <textarea id="siteDesc" placeholder="مرحبًا بك في موقعنا الشخصي!

موقعنا يقدم لك تجربة تفاعلية وشاملة لإدارة المحتوى الرقمي بسهولة وفعالية. من خلال واجهة مستخدم حديثة وبسيطة، يمكنك تحرير النصوص، تعديل الإعدادات، وحفظ البيانات محليًا على جهازك. كما يوفر الموقع أدوات مبتكرة مثل الإملاء الصوتي، معرفة الوقت والتاريخ، وتتبع الموقع الجغرافي لضمان تجربة استخدام متكاملة.

تم تصميم الموقع ليكون متجاوبًا مع جميع الأجهزة، مع دعم كامل لتغيير المظهر بين الوضع الليلي والنهاري، وتخصيص الخطوط والأحجام بما يتناسب مع تفضيلاتك. هدفنا هو تقديم بيئة مرنة وآمنة تسهّل إدارة محتواك الشخصي أو مشاريعك الصغيرة بشكل احترافي.

استمتع بتجربة موقع حديثة، سهلة، وآمنة!"></textarea>
      </div>

      <div class="card stat">
        <div class="row"><label>حجم النص المحفوظ</label>
          <div class="value" id="len">0</div>
        </div>
        <div class="row"><label>آخر حفظ</label>
          <div class="meta" id="lastSaved">لم يحفظ بعد</div>
        </div>
        <div class="row"><label>دليل الاستخدام</label>
          <div class="meta" id="usageGuide">اكتب النص واحفظه، يمكن تنزيله لاحقاً</div>
        </div>
      </div>
    </aside>

    <div id="historyModal" aria-hidden="true">
      <div class="panel">
        <h3>المحفوظات <button id="closeHistory" style="float:left">إغلاق</button></h3>
        <div id="historyList"></div>
      </div>
    </div>
    <div class="toast" id="toast">تم</div>
    <footer>نسخة نهائية — جاهزة للنشر</footer>

    <script>
      const editor = document.getElementById('editor');
      const saveBtn = document.getElementById('saveBtn');
      const downloadBtn = document.getElementById('downloadBtn');
      const clearBtn = document.getElementById('clearBtn');
      const timeBtn = document.getElementById('timeBtn');
      const locBtn = document.getElementById('locBtn');
      const themeBtn = document.getElementById('themeBtn');
      const newPageBtn = document.getElementById('newPageBtn');
      const historyBtn = document.getElementById('historyBtn');
      const voiceBtn = document.getElementById('voiceBtn');
      const toast = document.getElementById('toast');
      const lenEl = document.getElementById('len');
      const lastSaved = document.getElementById('lastSaved');
      const siteInput = document.getElementById('siteInput');
      const siteName = document.getElementById('siteName');
      const logoTxt = document.getElementById('logoTxt');
      const clock = document.getElementById('clock');
      const dateBox = document.getElementById('date');
      const coords = document.getElementById('coords');
      const accuracy = document.getElementById('accuracy');
      const statusText = document.getElementById('statusText');
      const statusInfo = document.getElementById('statusInfo');
      const sw = document.getElementById('switch');
      const fontSize = document.getElementById('fontSize');
      const fontFamily = document.getElementById('fontFamily');
      const historyModal = document.getElementById('historyModal');
      const historyListEl = document.getElementById('historyList');
      const closeHistory = document.getElementById('closeHistory');
      const voiceStatus = document.getElementById('voiceStatus');
      const siteDesc = document.getElementById('siteDesc');

      let userKey = 'app:user:' + (localStorage.getItem('userId') || Date.now());
      localStorage.setItem('userId', userKey.split(':')[2]);
      let historyList = JSON.parse(localStorage.getItem(userKey + ':history') || '[]');

      function showToast(txt, ms = 1600) { toast.innerText = txt; toast.style.display = 'block'; setTimeout(() => { toast.style.display = 'none'; }, ms); }

      function saveData() {
        localStorage.setItem(userKey + ':content', editor.innerHTML);
        localStorage.setItem(userKey + ':siteName', siteName.innerText);
        localStorage.setItem(userKey + ':siteInput', siteInput.value);
        localStorage.setItem(userKey + ':siteDesc', siteDesc.value);
        lenEl.innerText = editor.innerText.length;
        lastSaved.innerText = new Date().toLocaleString();
        historyList.push({ content: editor.innerHTML, date: new Date().toLocaleString() });
        localStorage.setItem(userKey + ':history', JSON.stringify(historyList));
        showToast('تم الحفظ محلياً');
      }

      function downloadHTML() {
        const blob = new Blob([editor.innerHTML], { type: 'text/html' });
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = 'page.html';
        a.click();
      }

      function clearContent() { editor.innerHTML = ''; lenEl.innerText = 0; }

      function showTime() { alert(new Date().toLocaleString()); }

      function getLocation() {
        if (!navigator.geolocation) { coords.innerText = "غير مدعوم"; return; }
        navigator.geolocation.getCurrentPosition(pos => {
          coords.innerText = `خط العرض: ${pos.coords.latitude}, خط الطول: ${pos.coords.longitude}`;
          accuracy.innerText = `دقة: ${pos.coords.accuracy} متر`;
        });
      }

      function toggleTheme() { document.body.classList.toggle('light'); }

      function newPage() { if (confirm('إنشاء صفحة جديدة؟ ستفقد المحتوى الحالي')) editor.innerHTML = ''; }

      function openHistory() {
        historyListEl.innerHTML = '';
        historyList.forEach((h, i) => {
          const div = document.createElement('div');
          div.className = 'history-item';
          div.innerHTML = `<div class="meta">${h.date}</div><div class="history-actions"><button onclick="loadHistory(${i})">تحميل</button><button onclick="deleteHistory(${i})">حذف</button></div>`;
          historyListEl.appendChild(div);
        });
        historyModal.style.display = 'flex';
      }

      function loadHistory(idx) { editor.innerHTML = historyList[idx].content; historyModal.style.display = 'none'; }

      function deleteHistory(idx) { historyList.splice(idx, 1); localStorage.setItem(userKey + ':history', JSON.stringify(historyList)); openHistory(); }

      saveBtn.onclick = saveData;
      downloadBtn.onclick = downloadHTML;
      clearBtn.onclick = clearContent;
      timeBtn.onclick = showTime;
      locBtn.onclick = getLocation;
      themeBtn.onclick = toggleTheme;
      newPageBtn.onclick = newPage;
      historyBtn.onclick = openHistory;
      closeHistory.onclick = () => historyModal.style.display = 'none';

      siteInput.addEventListener('input', () => siteName.innerText = siteInput.value);
      fontSize.addEventListener('change', () => editor.style.fontSize = fontSize.value);
      fontFamily.addEventListener('change', () => editor.style.fontFamily = fontFamily.value);

      sw.onclick = () => {
        sw.classList.toggle('on');
        const on = sw.classList.contains('on');
        sw.setAttribute('aria-checked', on);
        statusText.innerText = on ? 'مفعل' : 'غير مفعل';
        statusInfo.innerText = on ? 'الحالة حالياً مفعلة' : 'الحالة غير مفعلة';
      };

      // تحميل البيانات المحفوظة
      window.onload = () => {
        editor.innerHTML = localStorage.getItem(userKey + ':content') || editor.innerHTML;
        siteName.innerText = localStorage.getItem(userKey + ':siteName') || siteName.innerText;
        siteInput.value = localStorage.getItem(userKey + ':siteInput') || '';
        siteDesc.value = localStorage.getItem(userKey + ':siteDesc') || '';
        lenEl.innerText = editor.innerText.length;
        lastSaved.innerText = localStorage.getItem(userKey + ':lastSaved') || 'لم يحفظ بعد';
        setInterval(() => { clock.innerText = new Date().toLocaleTimeString(); dateBox.innerText = new Date().toLocaleDateString(); }, 1000);
      };

      // الإملاء الصوتي
      voiceBtn.onclick = () => {
        const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
        recognition.lang = 'ar';
        recognition.interimResults = true;
        recognition.onstart = () => voiceStatus.innerText = 'جاري التسجيل...';
        recognition.onresult = e => { editor.innerHTML += e.results[0][0].transcript; lenEl.innerText = editor.innerText.length; };
        recognition.onend = () => voiceStatus.innerText = 'تم الانتهاء من التسجيل';
        recognition.start();
      };

      // شاشة الترحيب
      const welcomeScreen = document.getElementById('welcomeScreen');
      const app = document.querySelector('.app');
      setTimeout(() => {
        welcomeScreen.style.display = 'none';
        app.style.display = 'grid';
      }, 10000); // 10 ثواني
    </script>
</body>

</html>
